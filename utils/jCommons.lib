#!/bin/sh 
# vim: set filetype=sh ts=2 sw=2 sts=2 et si ai: 

# commons-j.lib
# =
#
# Andres Aquino <aquino(at)hp.com>
# Hewlett-Packard Company | EBS
# 

jSetEnvironment () {
  # Version
  _JVERS="java15"

  # Language
  _JLANG="C"

  # TimeZone
  _JTIMZ="America/Mexico_City"

  # Memory (Initial Size)
  _JMISZ=

  # Memory (Maximum Size)
  _JMMSZ=

  # Memory (Initial Permanent Size)
  _JMIPZ=

  # Memory (Maximum Permanent Size)
  _JMMPZ=

  # Memory (HeapDump of memory)
  _JMDMP=

  # Thread (HeapDump of processes)
  _JTDMP=

  # Policy of Security
  _JPSEC=

  # java flags environment
  _JFLGS=

  # Initial and Maximum size of the Java Heap
  [ -z "${APMINI}" -o "${APMINI}" == "default" ] && APMINI="32m"
  JAVA_FLAGS="${JAVA_FLAGS} -Xms${APMINI}"

  [ -z "${APMMAX}" -o "${APMMAX}" == "default" ] && APMMAX="32m"
  JAVA_FLAGS="${JAVA_FLAGS} -Xmx${APMMAX}"

  # Size of the heap reserved for the permanent generation hold
  JAVA_FLAGS="${JAVA_FLAGS} -XX:PermSize=64m"
  JAVA_FLAGS="${JAVA_FLAGS} -XX:MaxPermSize=128m"

  # HeapDump
  JAVA_FLAGS="${JAVA_FLAGS} -XX:+HeapDumpOnCtrlBreak"
  JAVA_FLAGS="${JAVA_FLAGS} -XX:HeapDumpPath=${APPATH}/logs/${APNAME}-${APTIME}.hprof"

  # Garbage Collector
  JAVA_FLAGS="${JAVA_FLAGS} -XX:+DisableExplicitGC"
  JAVA_FLAGS="${JAVA_FLAGS} -XX:file=${APHOME}/logs/${APNAME}-${APTIME}.gc"

  # Java Security Policy
  JAVA_FLAGS="${JAVA_FLAGS} -Djava.security.policy=${APHOME}/java.policy"

}

jBuildClasspath ()
{
  # Java Classes
  JAVA_CLASSPATH="."
  for classfile in "${APHOME}/libs/*.jar"
  do
    JAVA_CLASSPATH="${classfile}:${JAVA_CLASSPATH}"
  done

  export CLASSPATH="${JAVA_CLASSPATH}:."

}


#
