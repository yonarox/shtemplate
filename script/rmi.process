#!/bin/sh 
# vim: set filetype=sh ts=2 sw=2 sts=2 et si ai: 

# rmi.process
# =
#
# Andres Aquino <aquino(at)hp.com>
# Hewlett-Packard Company | EBS
# 

function rmiVersion
{
  PrintOut "RMI Version 1.0"
}

function rmiStart
{
  # initial RMI parameters 
  local RMIBASE=${1}
  local RMIPORT=${2}

  export JAVA_RMI=
  export JAVA_RMILOCK="${APP_JTEMP}/RMI-${APP_NAME}.pid"

  # undefined, use defaults
  [ -z "${RMIBASE}" ] && RMIBASE=${JAVA_RMIBASE}
  [ -z "${RMIPORT}" ] && RMIPORT=${JAVA_RMIPORT}

  # define flag
  [ -f "${JAVA_RMILOCK}" ] && PrintOut "Some RMI process exists" && return 1
  if [ ! -f ${APP_JLIBR}/${RMIBASE} ]
  then
    LogMessage "Any RMI CodeBase file exists, verify ${JAVA_RMILOCK}"
    return 1
  else
    echo "rmiregistry ${RMIPORT}" 
    rmiregistry ${RMIPORT} 2>&1 &
    echo $! > ${APP_JTEMP}/${APP_NAME}-rmi.lck
    JAVA_RMI="file://${APP_JLIBR}/${RMIBASE}"
    export JAVA_RMIBASE="${RMIBASE}"
    export JAVA_RMIPORT="${RMIPORT}"

  fi

}

